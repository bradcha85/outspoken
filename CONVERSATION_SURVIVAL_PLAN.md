# ëŒ€í™” ì„œë°”ì´ë²Œ (Conversation Survival) êµ¬í˜„ ê³„íšì„œ

## Context

OutSpoken ì•±ì˜ í˜„ì¬ í•™ìŠµ ëª¨ë“œ(í”Œë˜ì‹œì¹´ë“œ, 4ì§€ì„ ë‹¤ í€´ì¦ˆ)ëŠ” í‘œí˜„ì„ "ì™¸ìš°ê²Œ"ëŠ” í•˜ì§€ë§Œ "ì“¸ ì¤„ ì•Œê²Œ"ëŠ” ëª» í•œë‹¤. ì‚¬ìš©ìê°€ ì‹¤ì œ ìƒí™©ì—ì„œ ì–´ë–¤ í‘œí˜„ì„ ì¨ì•¼ í•˜ëŠ”ì§€ **ë§¥ë½ì  íŒë‹¨ë ¥**ì„ í‚¤ìš¸ ìˆ˜ ìˆëŠ” ì¸í„°ë™í‹°ë¸Œ ì‹œë‚˜ë¦¬ì˜¤ ê¸°ëŠ¥ì„ ì¶”ê°€í•œë‹¤. í…ìŠ¤íŠ¸ ì–´ë“œë²¤ì²˜ í˜•íƒœë¡œ, ì„ íƒì— ë”°ë¼ ìŠ¤í† ë¦¬ê°€ ë¶„ê¸°í•˜ê³  í‹€ë¦° ì„ íƒì€ ì›ƒê¸°ê±°ë‚˜ ì–´ìƒ‰í•œ ê²°ê³¼ë¡œ ì´ì–´ì ¸ ê¸°ì–µì— ê°ì¸ëœë‹¤.

---

## íŒŒì¼ ë³€ê²½ ìš”ì•½

### ìƒˆë¡œ ìƒì„± (6ê°œ)
| ìˆœì„œ | íŒŒì¼ | ì„¤ëª… |
|------|------|------|
| 1 | `lib/models/scenario.dart` | ë°ì´í„° ëª¨ë¸ + enum |
| 2 | `lib/data/scenarios_data.dart` | 6ê°œ ì‹œë‚˜ë¦¬ì˜¤ ì •ì  ë°ì´í„° |
| 3 | `lib/providers/scenario_provider.dart` | ê²Œì„ ì„¸ì…˜ + ê²°ê³¼ ì €ì¥ |
| 4 | `lib/screens/scenario_list_screen.dart` | ì‹œë‚˜ë¦¬ì˜¤ ì„ íƒ í™”ë©´ |
| 5 | `lib/screens/scenario_play_screen.dart` | ë©”ì¸ ê²Œì„ í”Œë ˆì´ |
| 6 | `lib/screens/scenario_result_screen.dart` | ê²°ê³¼ + í„´ë³„ ë¦¬ë·° |

### ìˆ˜ì • (3ê°œ)
| íŒŒì¼ | ìˆ˜ì • ë‚´ìš© |
|------|----------|
| `lib/main.dart` | ScenarioProvider ë“±ë¡ |
| `lib/routes/app_router.dart` | ë¼ìš°íŠ¸ 3ê°œ ì¶”ê°€ |
| `lib/screens/home_screen.dart` | Quick Actionsì— ì„œë°”ì´ë²Œ ë²„íŠ¼ ì¶”ê°€ |

---

## Step 1. ë°ì´í„° ëª¨ë¸ â€” `lib/models/scenario.dart`

ê¸°ì¡´ íŒ¨í„´ ì¤€ìˆ˜: `final` í•„ë“œ, `const` ìƒì„±ì, `fromJson/toJson`, enumì€ `firstWhere + orElse`.

### Enum

```dart
enum ChoiceResult { perfect, awkward, fail }
enum ScenarioGrade { S, A, B, C, F }
```

### ëª¨ë¸ 4ê°œ

**ScenarioChoice** â€” ê° í„´ì˜ ì„ íƒì§€ í•˜ë‚˜
- `english` (String) â€” ì˜ì–´ í‘œí˜„
- `korean` (String) â€” í•œêµ­ì–´ ëœ»
- `result` (ChoiceResult) â€” perfect/awkward/fail
- `reaction` (String) â€” NPC ë°˜ì‘ (ì˜ì–´)
- `reactionKo` (String) â€” NPC ë°˜ì‘ (í•œêµ­ì–´)
- `explanation` (String) â€” ì™œ ì´ ì„ íƒì´ perfect/awkward/failì¸ì§€ í•´ì„¤
- `relatedPhraseId` (String?) â€” ê¸°ì¡´ Phrase ì—°ê²° (nullable)

**ScenarioTurn** â€” í•˜ë‚˜ì˜ í„´ (ìƒí™© + NPC ëŒ€ì‚¬ + ì„ íƒì§€ 3ê°œ)
- `turnNumber` (int) â€” 1~5 (ê²Œì„ì˜¤ë²„ í„´ì€ 0)
- `situation` (String) â€” ìƒí™© ì„¤ëª… (í•œêµ­ì–´)
- `npcDialogue` (String) â€” NPC ì˜ì–´ ëŒ€ì‚¬
- `npcDialogueKo` (String) â€” NPC ëŒ€ì‚¬ í•œêµ­ì–´ ë²ˆì—­
- `choices` (List\<ScenarioChoice\>) â€” ì„ íƒì§€ 3ê°œ
- `isGameOver` (bool) â€” ê²Œì„ì˜¤ë²„ íŠ¹ë³„ í„´ ì—¬ë¶€

**Scenario** â€” ì‹œë‚˜ë¦¬ì˜¤ ì „ì²´
- `id` (String) â€” ì˜ˆ: `sv_greetings`
- `categoryId` (String) â€” ê¸°ì¡´ ì¹´í…Œê³ ë¦¬ ì—°ê²°
- `title` / `titleEn` (String) â€” í•œêµ­ì–´/ì˜ì–´ ì œëª©
- `description` (String) â€” ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª…
- `setting` (String) â€” ì¥ì†Œ (ì˜ˆ: "ë¯¸êµ­ IT íšŒì‚¬ ì‚¬ë¬´ì‹¤")
- `npcName` (String) â€” NPC ì´ë¦„ (ì˜ˆ: "Mike (íŒ€ ë¦¬ë”)")
- `turns` (List\<ScenarioTurn\>) â€” ì •ìƒ í„´ 5ê°œ
- `gameOverTurn` (ScenarioTurn) â€” fail ì‹œ ì´ë™í•˜ëŠ” íŠ¹ë³„ í„´

**ScenarioResult** â€” í”Œë ˆì´ ê²°ê³¼ (SharedPreferences ì €ì¥ìš©)
- `scenarioId`, `grade`, `perfectCount`, `awkwardCount`, `failCount`
- `turnsCompleted`, `choiceHistory` (List\<ChoiceResult\>), `playedAt`
- `copyWith()` í¬í•¨

### ë“±ê¸‰ ì‚°ì • í•¨ìˆ˜

```dart
ScenarioGrade calculateGrade(int perfectCount, int awkwardCount, bool gameOver) {
  if (gameOver) return ScenarioGrade.F;
  if (perfectCount == 5) return ScenarioGrade.S;
  if (perfectCount >= 4) return ScenarioGrade.A;
  if (perfectCount >= 3) return ScenarioGrade.B;
  if (perfectCount >= 2) return ScenarioGrade.C;
  return ScenarioGrade.F;
}
```

---

## Step 2. ì‹œë‚˜ë¦¬ì˜¤ ë°ì´í„° â€” `lib/data/scenarios_data.dart`

`final List<Scenario> allScenarios = [...]` ì „ì—­ ìƒìˆ˜ ë¦¬ìŠ¤íŠ¸. 6ê°œ ì‹œë‚˜ë¦¬ì˜¤:

| ID | categoryId | ì œëª© | ì¥ì†Œ | NPC |
|---|---|---|---|---|
| `sv_greetings` | greetings | ìƒˆ ì§ì¥ ì²« ì¶œê·¼ | ë¯¸êµ­ IT íšŒì‚¬ ì‚¬ë¬´ì‹¤ | Mike (íŒ€ ë¦¬ë”) |
| `sv_restaurant` | restaurant | ë¯¸êµ­ ë ˆìŠ¤í† ë‘ ì²« ë°©ë¬¸ | ë‰´ìš• ë¸ŒëŸ°ì¹˜ ë ˆìŠ¤í† ë‘ | Sarah (ì›¨ì´íŠ¸ë¦¬ìŠ¤) |
| `sv_shopping` | shopping | ì˜· ê°€ê²Œì—ì„œ ì‡¼í•‘ | LA ì‡¼í•‘ëª° ì˜ë¥˜ ë§¤ì¥ | Emma (ì ì›) |
| `sv_travel` | travel | ê³µí•­ ì…êµ­ ì‹¬ì‚¬ | JFK ê³µí•­ ì…êµ­ì¥ | Officer Davis |
| `sv_workplace` | workplace | ì²« í”„ë¡œì íŠ¸ íšŒì˜ | ì‹¤ë¦¬ì½˜ë°¸ë¦¬ ìŠ¤íƒ€íŠ¸ì—… | Lisa (PM) |
| `sv_emergency` | emergency | ê¸¸ì—ì„œ ë‹¤ì¹œ ì¹œêµ¬ | ìƒŒí”„ë€ì‹œìŠ¤ì½” ì‹œë‚´ | 911 Operator |

ê° ì‹œë‚˜ë¦¬ì˜¤: 5í„´ Ã— 3ì„ íƒì§€ (perfect 1 + awkward 1 + fail 1) + gameOverTurn 1ê°œ.
fail ì„ íƒì§€ì˜ ë°˜ì‘ì€ ì›ƒê¸°ê³  ê³¼ì¥ë˜ê²Œ ì‘ì„±í•´ì„œ ê¸°ì–µì— ë‚¨ê²Œ í•œë‹¤.

---

## Step 3. í”„ë¡œë°”ì´ë” â€” `lib/providers/scenario_provider.dart`

ê¸°ì¡´ ProgressProvider íŒ¨í„´ ì¤€ìˆ˜: ChangeNotifier, private í•„ë“œ + getter, `load()/_save()`, SharedPreferences JSON.

### ìƒíƒœ í•„ë“œ

```
ì •ì  ë°ì´í„°:  _scenarios (allScenariosì—ì„œ ë¡œë“œ)
ì˜êµ¬ ì €ì¥:    _results (List<ScenarioResult>) â€” SharedPreferences 'scenario_results' í‚¤
ì¸ë©”ëª¨ë¦¬:     _activeScenarioId, _currentTurnIndex, _currentChoiceHistory, _isGameOver
```

### ì£¼ìš” ë©”ì„œë“œ

| ë©”ì„œë“œ | ì—­í•  |
|--------|------|
| `load()` | SharedPreferencesì—ì„œ ê²°ê³¼ ë³µì› |
| `startScenario(id)` | ê²Œì„ ì„¸ì…˜ ì´ˆê¸°í™” |
| `makeChoice(result)` | ì„ íƒ ê¸°ë¡ + failì´ë©´ gameOver í”Œë˜ê·¸ |
| `advanceToNextTurn()` | ë‹¤ìŒ í„´ ì¸ë±ìŠ¤ ì¦ê°€ |
| `finishScenario()` â†’ `ScenarioResult` | ë“±ê¸‰ ê³„ì‚° + ê²°ê³¼ ì €ì¥ + ë°˜í™˜ |
| `resetSession()` | ì„¸ì…˜ ì´ˆê¸°í™” |
| `bestGrade(scenarioId)` â†’ `ScenarioGrade?` | ìµœê³  ë“±ê¸‰ ì¡°íšŒ |
| `playCount(scenarioId)` â†’ `int` | í”Œë ˆì´ íšŸìˆ˜ |

### Getter

| Getter | ë°˜í™˜ |
|--------|------|
| `activeScenario` | í˜„ì¬ ì§„í–‰ ì¤‘ì¸ Scenario |
| `currentTurn` | í˜„ì¬ í„´ (gameOverë©´ gameOverTurn) |
| `isLastTurn` | ë§ˆì§€ë§‰ í„´ ì—¬ë¶€ |
| `isScenarioComplete` | ì‹œë‚˜ë¦¬ì˜¤ ì¢…ë£Œ ì—¬ë¶€ |

---

## Step 4. í™”ë©´ â€” UI íë¦„ ìƒì„¸

### ì „ì²´ ë„¤ë¹„ê²Œì´ì…˜ íë¦„

```
í™ˆ í™”ë©´
  â””â”€ "ì„œë°”ì´ë²Œ" Quick Action íƒ­
      â””â”€ /scenario-list (ì‹œë‚˜ë¦¬ì˜¤ ì„ íƒ)
          â””â”€ ì¹´ë“œ íƒ­
              â””â”€ /scenario-play/:scenarioId (ê²Œì„ í”Œë ˆì´)
                  â”œâ”€ ì¸íŠ¸ë¡œ â†’ í„´ ë°˜ë³µ (5í„´) â†’ ê²°ê³¼
                  â””â”€ fail ì„ íƒ â†’ ê²Œì„ì˜¤ë²„ â†’ ê²°ê³¼
                      â””â”€ /scenario-result/:scenarioId (ê²°ê³¼ í™”ë©´)
                          â”œâ”€ "ë‹¤ì‹œ ë„ì „" â†’ /scenario-play/:id (pushReplacement)
                          â””â”€ "ëª©ë¡ìœ¼ë¡œ" â†’ pop
```

### 4-a. scenario_list_screen.dart (StatelessWidget)

```
â”Œâ”€ AppBar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â†]      ëŒ€í™” ì„œë°”ì´ë²Œ           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  ğŸ­ ì‹¤ì „ ëŒ€í™”ì— ë„ì „í•˜ì„¸ìš”!      â”‚  í—¤ë” (ì„¤ëª… í…ìŠ¤íŠ¸)
â”‚  ìƒí™©ì— ë§ëŠ” í‘œí˜„ì„ ê³¨ë¼         â”‚
â”‚  ëŒ€í™”ë¥¼ ì´ì–´ê°€ ë³´ì„¸ìš”.           â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€ ì‹œë‚˜ë¦¬ì˜¤ ì¹´ë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [ğŸŸ£ ì•„ì´ì½˜]               â”‚ â”‚  ì¹´í…Œê³ ë¦¬ ìƒ‰ìƒ ì›í˜• ë°°ì§€
â”‚  â”‚  ìƒˆ ì§ì¥ ì²« ì¶œê·¼           â”‚ â”‚  title (headlineSmall)
â”‚  â”‚  First Day at Work        â”‚ â”‚  titleEn (bodySmall)
â”‚  â”‚  ë™ë£Œë“¤ì—ê²Œ ìì—°ìŠ¤ëŸ½ê²Œ...  â”‚ â”‚  description (bodyMedium)
â”‚  â”‚                    [S]    â”‚ â”‚  ìµœê³  ë“±ê¸‰ ë°°ì§€ or "NEW"
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€ ì‹œë‚˜ë¦¬ì˜¤ ì¹´ë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [ğŸŸ  ì•„ì´ì½˜]               â”‚ â”‚
â”‚  â”‚  ë¯¸êµ­ ë ˆìŠ¤í† ë‘ ì²« ë°©ë¬¸     â”‚ â”‚
â”‚  â”‚  ...                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  ... (6ê°œ ì¹´ë“œ)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- Provider: `context.watch<ScenarioProvider>()` + `context.read<PhraseProvider>()`
- ì¹´í…Œê³ ë¦¬ ìƒ‰ìƒ: `phraseProvider.getCategoryById(scenario.categoryId)?.color`
- ë“±ê¸‰ ë°°ì§€ ìƒ‰ìƒ: S=amber, A=green, B=blue, C=gray, F=red
- onTap: `context.push('/scenario-play/${scenario.id}')`

### 4-b. scenario_play_screen.dart (StatefulWidget + SingleTickerProviderStateMixin)

ê°€ì¥ ë³µì¡í•œ í™”ë©´. **4ê°€ì§€ ìƒíƒœ**ë¥¼ build ë‚´ì—ì„œ ë¶„ê¸°:

**ìƒíƒœ 1: ì¸íŠ¸ë¡œ** (`!_introShown`)

```
â”Œâ”€ AppBar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [X]                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  ğŸ“ ë¯¸êµ­ IT íšŒì‚¬ ì‚¬ë¬´ì‹¤          â”‚  ì¥ì†Œ íƒœê·¸ (ì¹´í…Œê³ ë¦¬ ìƒ‰ìƒ)
â”‚                                 â”‚
â”‚  â”Œâ”€ ì¸íŠ¸ë¡œ ì¹´ë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚   ìƒˆ ì§ì¥ ì²« ì¶œê·¼           â”‚ â”‚  title (headlineLarge)
â”‚  â”‚   First Day at Work        â”‚ â”‚  titleEn (bodyMedium)
â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚   ìƒˆ ì§ì¥ì— ì²« ì¶œê·¼!        â”‚ â”‚  description
â”‚  â”‚   ë™ë£Œë“¤ì—ê²Œ ìì—°ìŠ¤ëŸ½ê²Œ     â”‚ â”‚
â”‚  â”‚   ì¸ì‚¬í•˜ê³  ìê¸°ì†Œê°œë¥¼       â”‚ â”‚
â”‚  â”‚   í•´ë³´ì„¸ìš”.                â”‚ â”‚
â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚   ğŸ—£ Mike (íŒ€ ë¦¬ë”)         â”‚ â”‚  NPC ì†Œê°œ
â”‚  â”‚                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚       ì‹œì‘í•˜ê¸°              â”‚ â”‚  CustomButton primary
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìƒíƒœ 2: í„´ ì§„í–‰ â€” ì„ íƒ ëŒ€ê¸°** (`_introShown && !_showReaction`)

```
â”Œâ”€ AppBar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [X]                    2 / 5   â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚  ProgressBarWidget
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  ì‚¬ë¬´ì‹¤ ë¡œë¹„ì— ë“¤ì–´ì„œë‹ˆ íŒ€ ë¦¬ë”  â”‚  situation (bodyLarge, í•œêµ­ì–´)
â”‚  Mikeê°€ ë‹¤ê°€ì˜¤ë©° í™˜í•˜ê²Œ          â”‚
â”‚  ì›ƒê³  ìˆë‹¤.                     â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€ NPC ë§í’ì„  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ—£ Mike         [ğŸ”Š TTS]  â”‚ â”‚  NPC ì´ë¦„ + TTS ë²„íŠ¼
â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚ "Hey! You must be the new  â”‚ â”‚  npcDialogue (titleLarge)
â”‚  â”‚  member. I'm Mike..."      â”‚ â”‚
â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚ ì•ˆë…•! ìƒˆ ë©¤ë²„êµ¬ë‚˜...        â”‚ â”‚  npcDialogueKo (bodySmall)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  (íƒ­ìœ¼ë¡œ í‘œì‹œ/ìˆ¨ê¹€ í† ê¸€)
â”‚                                 â”‚
â”‚  â”Œâ”€ A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  ì„ íƒì§€ 3ê°œ (AnimatedContainer)
â”‚  â”‚ "Nice to meet you too,    â”‚ â”‚  english (titleMedium)
â”‚  â”‚  Mike! I'm really..."     â”‚ â”‚
â”‚  â”‚ ì €ë„ ë§Œë‚˜ì„œ ë°˜ê°‘ìŠµë‹ˆë‹¤...  â”‚ â”‚  korean (bodySmall, ì—°í•œ ìƒ‰)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€ B â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ "Hey Mike. Yeah, I'm new."â”‚ â”‚
â”‚  â”‚ ì•ˆë…• Mike. ê·¸ë˜, ë‚˜ ìƒˆë¡œ..â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€ C â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ "Thank you for your..."   â”‚ â”‚
â”‚  â”‚ ë‹¹ì‹ ì˜ ë´‰ì‚¬ì— ê°ì‚¬...      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìƒíƒœ 3: ì„ íƒ ê²°ê³¼ í‘œì‹œ** (`_showReaction`)

```
â”Œâ”€ AppBar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [X]                    2 / 5   â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  â”Œâ”€ ê²°ê³¼ ë°°ì§€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  ê²°ê³¼ë³„ ìƒ‰ìƒ + ì´ëª¨ì§€
â”‚  â”‚  âœ… Perfect!               â”‚ â”‚  ì´ˆë¡ (perfect)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  âš ï¸ Awkward! ì£¼í™© (awkward)
â”‚                                 â”‚  ğŸ’€ Game Over! ë¹¨ê°• (fail)
â”‚  â”Œâ”€ ë‚´ ì„ íƒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ "Nice to meet you too..."  â”‚ â”‚  ì„ íƒí•œ í‘œí˜„ (í•˜ì´ë¼ì´íŠ¸)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€ NPC ë°˜ì‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  reaction + reactionKo
â”‚  â”‚ ğŸ—£ Mike                    â”‚ â”‚
â”‚  â”‚ "That's great to hear!    â”‚ â”‚
â”‚  â”‚  Let me show you around." â”‚ â”‚
â”‚  â”‚                            â”‚ â”‚
â”‚  â”‚ ê·¸ ë§ ì¢‹ë‹¤! ì‚¬ë¬´ì‹¤         â”‚ â”‚
â”‚  â”‚ êµ¬ê²½ì‹œì¼œ ì¤„ê²Œ.             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€ í•´ì„¤ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  explanation (surfaceAlt ë°°ê²½)
â”‚  â”‚ ğŸ’¡ "Nice to meet you too" â”‚ â”‚
â”‚  â”‚ ëŠ” ì²« ë§Œë‚¨ ì¸ì‚¬ì˜ ì •ì„ì ì¸ â”‚ â”‚
â”‚  â”‚ ë‹µë³€ì´ì—ìš”...              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚       ë‹¤ìŒ í„´ â†’             â”‚ â”‚  CustomButton primary
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  (ë§ˆì§€ë§‰ í„´ì´ë©´ "ê²°ê³¼ ë³´ê¸°")
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìƒíƒœ 4: ê²Œì„ ì˜¤ë²„** (`_isGameOver`)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            GAME OVER            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚             ğŸ’€                  â”‚  í° ì•„ì´ì½˜ (iconXL)
â”‚                                 â”‚
â”‚  ë‹¹ì‹ ì˜ ë°œì–¸ì— ì‚¬ë¬´ì‹¤ì´          â”‚  gameOverTurn.situation
â”‚  ì–¼ì–´ë¶™ì—ˆë‹¤...                  â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€ NPC ìµœì¢… ëŒ€ì‚¬ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ—£ Mike                    â”‚ â”‚
â”‚  â”‚ "I think there's been     â”‚ â”‚
â”‚  â”‚  some kind of             â”‚ â”‚
â”‚  â”‚  misunderstanding..."     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚       ê²°ê³¼ ë³´ê¸°              â”‚ â”‚  CustomButton primary
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì£¼ìš” êµ¬í˜„ ìš”ì†Œ:**
- ì• ë‹ˆë©”ì´ì…˜: `AnimationController` (400ms, easeInOut) â€” ê²°ê³¼ í˜ì´ë“œì¸
- ì„ íƒì§€ ìƒ‰ìƒ ë³€ê²½: `AnimatedContainer` (200ms) â€” quiz_screen íŒ¨í„´ ì¬ì‚¬ìš©
- TTS: `SherpaTtsService.instance`, NPC ëŒ€ì‚¬ ì˜† ì¬ìƒ ë²„íŠ¼, perfect ì„ íƒ ì‹œ ìë™ ì¬ìƒ
- ë„¤ë¹„ê²Œì´ì…˜: fail/ë§ˆì§€ë§‰í„´ â†’ `context.pushReplacement('/scenario-result/:id')`
- í•œêµ­ì–´ ë²ˆì—­ í† ê¸€: phrase_detail_screenì˜ `_showKorean` íŒ¨í„´ ì¬ì‚¬ìš©

### 4-c. scenario_result_screen.dart (StatelessWidget)

```
â”Œâ”€ AppBar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [X]           ê²°ê³¼               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  ë“±ê¸‰ ì›í˜• ë°°ì§€ (120x120)
â”‚       â”‚              â”‚          â”‚
â”‚       â”‚      S       â”‚          â”‚  grade (displayLarge)
â”‚       â”‚   Perfect!   â”‚          â”‚  ë“±ê¸‰ ì„¤ëª… (bodyMedium)
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  ë“±ê¸‰ë³„ ìƒ‰ìƒ:
â”‚                                 â”‚    S=amber, A=green, B=blue
â”‚   5/5 Perfect Â· 0 Awkward      â”‚    C=gray, F=red
â”‚                                 â”‚
â”‚  â”€â”€ í„´ë³„ ë¦¬ë·° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  ì„¹ì…˜ êµ¬ë¶„ì„ 
â”‚                                 â”‚
â”‚  1ï¸âƒ£ ë¡œë¹„ì—ì„œ ì²« ë§Œë‚¨             â”‚  í„´ ë²ˆí˜¸ + situation ìš”ì•½
â”‚  âœ… "Nice to meet you too..."  â”‚  ì„ íƒí•œ í‘œí˜„ + ì•„ì´ì½˜
â”‚  â”Œâ”€ í•´ì„¤ (ì ‘ê¸°/í´ê¸°) â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  ExpansionTile
â”‚  â”‚ ğŸ’¡ ì •ì„ì ì¸ ë‹µë³€...         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  2ï¸âƒ£ ìê¸°ì†Œê°œ ìš”ì²­               â”‚
â”‚  âš ï¸ "I... do computer stuff." â”‚
â”‚  â”Œâ”€ í•´ì„¤ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ’¡ ë„ˆë¬´ ëª¨í˜¸í•˜ê³ ...         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  ... (í„´ë³„ ë°˜ë³µ)                â”‚
â”‚                                 â”‚
â”‚  â”€â”€ ì´ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ë°°ìš´ í‘œí˜„ â”€â”€ â”‚  perfect ì„ íƒì— ì—°ê²°ëœ Phrase
â”‚  â”Œâ”€ PhraseListItem â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  ê¸°ì¡´ PhraseListItem ìœ„ì ¯ ì¬ì‚¬ìš©
â”‚  â”‚ "Nice to meet you."        â”‚ â”‚  relatedPhraseIdë¡œ ì—°ê²°
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚       ë‹¤ì‹œ ë„ì „í•˜ê¸°          â”‚ â”‚  CustomButton primary
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚       ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°      â”‚ â”‚  CustomButton outline
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- "ë‹¤ì‹œ ë„ì „": `context.pushReplacement('/scenario-play/${scenarioId}')`
- "ëª©ë¡ìœ¼ë¡œ": `context.go('/scenario-list')`
- í„´ë³„ ë¦¬ë·°: ì‹œë‚˜ë¦¬ì˜¤ì˜ turnsì™€ ê²°ê³¼ì˜ choiceHistoryë¥¼ zipí•´ì„œ ë§¤ì¹­

---

## Step 5. ë¼ìš°í„° ìˆ˜ì • â€” `lib/routes/app_router.dart`

import 3ê°œ ì¶”ê°€ + ê¸°ì¡´ `/roadmap` ë¼ìš°íŠ¸ ì•„ë˜ì— GoRoute 3ê°œ ì¶”ê°€:

```dart
GoRoute(path: '/scenario-list', builder: (_, __) => const ScenarioListScreen()),
GoRoute(path: '/scenario-play/:scenarioId', builder: (_, state) => ScenarioPlayScreen(scenarioId: state.pathParameters['scenarioId']!)),
GoRoute(path: '/scenario-result/:scenarioId', builder: (_, state) => ScenarioResultScreen(scenarioId: state.pathParameters['scenarioId']!)),
```

---

## Step 6. main.dart ìˆ˜ì •

import ì¶”ê°€ + MultiProviderì— ScenarioProvider ë“±ë¡:

```dart
ChangeNotifierProvider(create: (_) => ScenarioProvider()..load()),
```

---

## Step 7. í™ˆ í™”ë©´ ìˆ˜ì • â€” `lib/screens/home_screen.dart`

Quick Actions ì„¹ì…˜ì˜ ê¸°ì¡´ `Row` (ì—°ìŠµ + í€´ì¦ˆ 2ê°œ)ì— "ì„œë°”ì´ë²Œ" ì¹´ë“œ ì¶”ê°€ â†’ 3ê°œë¡œ ë³€ê²½.

```dart
_QuickActionCard(
  icon: Icons.auto_stories_rounded,
  label: 'ì„œë°”ì´ë²Œ',
  description: 'ì‹¤ì „ ëŒ€í™” ë„ì „',
  color: AppColors.accentColor(context),
  bgColor: AppColors.accentColor(context).withValues(alpha: 0.08),
  borderColor: AppColors.accentColor(context).withValues(alpha: 0.15),
  onTap: () => context.push('/scenario-list'),
),
```

ê¸°ì¡´ ì¹´ë“œ ê°„ ê°„ê²©ì„ `gapLG` â†’ `gapMD`ë¡œ ì¤„ì—¬ 3ê°œê°€ ê· ë“± ë°°ì¹˜ë˜ë„ë¡ ì¡°ì •.

---

## êµ¬í˜„ ìˆœì„œ (ì˜ì¡´ì„± ê¸°ë°˜)

```
1. lib/models/scenario.dart                    â† ì˜ì¡´ì„± ì—†ìŒ
2. lib/data/scenarios_data.dart                â† 1ì— ì˜ì¡´
3. lib/providers/scenario_provider.dart        â† 1, 2ì— ì˜ì¡´
4. lib/main.dart ìˆ˜ì •                          â† 3ì— ì˜ì¡´
5. lib/screens/scenario_list_screen.dart       â† 3ì— ì˜ì¡´
6. lib/screens/scenario_play_screen.dart       â† 3ì— ì˜ì¡´ (ê°€ì¥ ë³µì¡)
7. lib/screens/scenario_result_screen.dart     â† 3ì— ì˜ì¡´
8. lib/routes/app_router.dart ìˆ˜ì •             â† 5, 6, 7ì— ì˜ì¡´
9. lib/screens/home_screen.dart ìˆ˜ì •           â† ë¼ìš°íŠ¸ë§Œ ì°¸ì¡°
```

---

## ë””ìì¸ ê·œì¹™ (ê¸°ì¡´ íŒ¨í„´ ì¤€ìˆ˜)

- ìƒ‰ìƒ: `AppColors.xxxColor(context)` â€” ë‹¤í¬ëª¨ë“œ ìë™ ëŒ€ì‘, í•˜ë“œì½”ë”© ê¸ˆì§€
- íƒ€ì´í¬: `AppTextStyles.xxx` ìƒìˆ˜ ì‚¬ìš©
- ë ˆì´ì•„ì›ƒ: `AppLayout.paddingMD`, `AppLayout.radiusMD` ë“± ì‚¬ìš©
- ì¹´ë“œ: `surfaceColor` ë°°ê²½ + `borderColor` í…Œë‘ë¦¬ + ìµœì†Œ ê·¸ë¦¼ì
- ë²„íŠ¼: `CustomButton` ìœ„ì ¯ ì¬ì‚¬ìš© (primary/outline)
- ì§„í–‰ë°”: `ProgressBarWidget` ì¬ì‚¬ìš©
- ì ‘ê·¼ì„±: íƒ­ ê°€ëŠ¥ ìš”ì†Œì— `Semantics(button: true, label: '...')`

---

## ê²€ì¦ ë°©ë²•

1. `flutter analyze` â€” lint ì—ëŸ¬ ì—†ëŠ”ì§€ í™•ì¸
2. ì•± ì‹¤í–‰ í›„ í™ˆ â†’ "ì„œë°”ì´ë²Œ" â†’ ì‹œë‚˜ë¦¬ì˜¤ ë¦¬ìŠ¤íŠ¸ ì§„ì… í™•ì¸
3. ì‹œë‚˜ë¦¬ì˜¤ 1ê°œ (greetings) ì „ì²´ í”Œë ˆì´: ì¸íŠ¸ë¡œ â†’ 5í„´ â†’ ê²°ê³¼
4. fail ì„ íƒ ì‹œ ê²Œì„ì˜¤ë²„ â†’ ê²°ê³¼ í™”ë©´ ì •ìƒ ì´ë™ í™•ì¸
5. ê²°ê³¼ í™”ë©´ì—ì„œ "ë‹¤ì‹œ ë„ì „" â†’ ì¬í”Œë ˆì´ ì •ìƒ ì‘ë™ í™•ì¸
6. ì•± ì¢…ë£Œ í›„ ì¬ì‹œì‘ â†’ í”Œë ˆì´ ê²°ê³¼(ë“±ê¸‰, íšŸìˆ˜) ìœ ì§€ í™•ì¸
7. ì‹œë‚˜ë¦¬ì˜¤ ë¦¬ìŠ¤íŠ¸ì—ì„œ ìµœê³  ë“±ê¸‰ ë°°ì§€ ì •ìƒ í‘œì‹œ í™•ì¸
8. ë‹¤í¬ëª¨ë“œ ì „í™˜ â†’ ëª¨ë“  í™”ë©´ ìƒ‰ìƒ ëŒ€ë¹„ ì •ìƒ í™•ì¸
9. TTS ì¬ìƒ ì •ìƒ ì‘ë™ í™•ì¸ (NPC ëŒ€ì‚¬ + perfect ì„ íƒ ìë™ ì¬ìƒ)
